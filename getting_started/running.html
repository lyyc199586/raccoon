<!DOCTYPE html><head><meta charset="UTF-8"><title>Running your first model | RACCOON</title><link rel="icon" type="image/x-icon" href="../media/raccoon_icon.png" sizes="16x16 32x32 64x64 128x128"></link><link href="../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../contrib/jquery/jquery.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="https://hugary1995.github.io/raccoon/index.html" class="left moose-logo hide-on-med-and-down">RACCOON</a><a href="https://github.com/hugary1995/raccoon" class="right"><img src="../media/framework/github-logo.png" class="github-mark"></img><img src="../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="#!" class="dropdown-trigger" data-target="26d1c634-d293-41db-bef6-66ba917787fd" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="06caa867-5868-4e0a-858d-4ecb2d5f814b" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="d87f2627-e960-4cdd-8236-b98150940d47" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="9826fa7d-72f6-4318-8bac-9e7f71f59ac2" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../contribute/index.html">Contribute</a></li></ul><a href="#" class="sidenav-trigger" data-target="c5368a82-9937-4f09-bccc-9f1e568cf71c"><i class="material-icons">menu</i></a><ul class="sidenav" id="c5368a82-9937-4f09-bccc-9f1e568cf71c"><li><a href="#!" class="dropdown-trigger" data-target="f67d8a5c-f8d1-46ba-83e1-3b4dfeb8b854" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="27d7871b-8d35-40b5-9ad4-97bf721b04ef" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="120114f5-7e8f-4481-b263-24fcdcd8ace8" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="3238ad1b-f99a-49f9-9126-07c35bff562c" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../contribute/index.html">Contribute</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div><ul class="dropdown-content" id="26d1c634-d293-41db-bef6-66ba917787fd"><li><a href="install.html">Install RACCOON</a></li><li><a href="update.html">Update RACCOON</a></li><li><a href="running.html">Running your first model</a></li><li><a href="paraview.html">Visualization</a></li><li><a href="ide.html">Code development</a></li></ul><ul class="dropdown-content" id="06caa867-5868-4e0a-858d-4ecb2d5f814b"><li><a href="../tutorials/01_small_deformation_elasticity.html">1. Small deformation</a></li><li><a href="../tutorials/02_mode1_brittle_fracture.html">2. Mode-I fracture</a></li><li><a href="../tutorials/03_mode2_brittle_fracture.html">3. Mode-II fracture</a></li><li><a href="../tutorials/04_fiber_reinforced_matrix.html">4. Fiber-reinforced matrix</a></li><li><a href="../tutorials/05_soil_desiccation.html">5. Soil desiccation</a></li><li><a href="../tutorials/06_large_deformation_elasticity.html">6. Large deformation</a></li><li><a href="../tutorials/07_elastoplasticity.html">7. Elastoplasticity</a></li><li><a href="../tutorials/08_ductile_fracture.html">8. Ductile fracture</a></li><li><a href="../tutorials/09_three_point_bending.html">9. Three-point bending</a></li></ul><ul class="dropdown-content" id="d87f2627-e960-4cdd-8236-b98150940d47"><li><a href="../theory/intro.html">Introduction</a></li><li><a href="../theory/kinematics.html">State variables and kinematics</a></li><li><a href="../theory/thermodynamics.html">Thermodynamics</a></li><li><a href="../theory/minimization.html">The minimization problem</a></li><li><a href="../theory/constitutive_models.html">Constitutive Models</a></li></ul><ul class="dropdown-content" id="9826fa7d-72f6-4318-8bac-9e7f71f59ac2"><li><a href="../modules/index.html">Physics modules</a></li><li><a href="../syntax/index.html">Complete syntax</a></li><li><a href="../syntax/raccoon.html">RACCOON syntax</a></li><li><a href="../syntax/tensor_mechanics.html">Tensor mechanics syntax</a></li><li><a href="../syntax/phase_field.html">Phase field syntax</a></li><li><a href="../syntax/heat_conduction.html">Heat conduction syntax</a></li></ul><ul class="dropdown-content" id="f67d8a5c-f8d1-46ba-83e1-3b4dfeb8b854"><li><a href="install.html">Install RACCOON</a></li><li><a href="update.html">Update RACCOON</a></li><li><a href="running.html">Running your first model</a></li><li><a href="paraview.html">Visualization</a></li><li><a href="ide.html">Code development</a></li></ul><ul class="dropdown-content" id="27d7871b-8d35-40b5-9ad4-97bf721b04ef"><li><a href="../tutorials/01_small_deformation_elasticity.html">1. Small deformation</a></li><li><a href="../tutorials/02_mode1_brittle_fracture.html">2. Mode-I fracture</a></li><li><a href="../tutorials/03_mode2_brittle_fracture.html">3. Mode-II fracture</a></li><li><a href="../tutorials/04_fiber_reinforced_matrix.html">4. Fiber-reinforced matrix</a></li><li><a href="../tutorials/05_soil_desiccation.html">5. Soil desiccation</a></li><li><a href="../tutorials/06_large_deformation_elasticity.html">6. Large deformation</a></li><li><a href="../tutorials/07_elastoplasticity.html">7. Elastoplasticity</a></li><li><a href="../tutorials/08_ductile_fracture.html">8. Ductile fracture</a></li><li><a href="../tutorials/09_three_point_bending.html">9. Three-point bending</a></li></ul><ul class="dropdown-content" id="120114f5-7e8f-4481-b263-24fcdcd8ace8"><li><a href="../theory/intro.html">Introduction</a></li><li><a href="../theory/kinematics.html">State variables and kinematics</a></li><li><a href="../theory/thermodynamics.html">Thermodynamics</a></li><li><a href="../theory/minimization.html">The minimization problem</a></li><li><a href="../theory/constitutive_models.html">Constitutive Models</a></li></ul><ul class="dropdown-content" id="3238ad1b-f99a-49f9-9126-07c35bff562c"><li><a href="../modules/index.html">Physics modules</a></li><li><a href="../syntax/index.html">Complete syntax</a></li><li><a href="../syntax/raccoon.html">RACCOON syntax</a></li><li><a href="../syntax/tensor_mechanics.html">Tensor mechanics syntax</a></li><li><a href="../syntax/phase_field.html">Phase field syntax</a></li><li><a href="../syntax/heat_conduction.html">Heat conduction syntax</a></li></ul></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="https://hugary1995.github.io/raccoon/index.html" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="moose-content col s12 m12 l12"><section id="edf78f3c-54ea-485b-aa4c-83fec330b335" data-section-level="1" data-section-text="Running your first model"><h1 id="running-your-first-model">Running your first model</h1><section id="12eaf848-d560-4c02-b31f-48f208ff5484" data-section-level="2" data-section-text="Understanding the code organization"><h2 id="understanding-the-code-organization">Understanding the code organization</h2><p>Before running any model, it is important to understand what a &quot;model&quot; means in MOOSE. In the MOOSE ecosystem, the source code and the configuration of your model are separated.</p><p>The source codes of your model are written in C++, and they are compiled into an executable file. In RACCOON the executable is called <code>raccoon-opt</code>.</p><p>The configurations of your model are written in Hit format, and they are called &quot;input files&quot; with a <code>.i</code> extension. While your models may work for a wide variety of problems, an input file typically contains configurations for a <em>specific</em> problem. An input file may contain information about mesh, variables, weak form, constitutive models, boundary conditions, initial conditions, postprocessors, and so on.</p><blockquote><p>For example, a very general constitutive model for <a href="../source/materials/small_deformation_models/SmallDeformationIsotropicElasticity.html">isotropic linear elasticity</a> is implemented in RACCOON:</p><ul class="browser-default"><li><p>Its source code is written in C++: <a class="moose-source-filename tooltipped modal-trigger" href="#3c8050e2-4530-4bee-8e72-612ff829ecae">SmallDeformationIsotropicElasticity.C</a>, </p></li><li><p>together with its header file: <a class="moose-source-filename tooltipped modal-trigger" href="#29326ef3-7862-4de6-9aae-87827d038793">SmallDeformationIsotropicElasticity.h</a></p></li></ul><p>This constitutive model calculates the stress given the strain, the bulk modulus, and the shear modulus. However, <u>the bulk modulus and the shear modulus need not be hard-coded</u> in the source code. The values of the bulk modulus and the shear modulus are retrieved from an input file. In an input file, this constitutive model is used with the following syntax:</p><pre class="moose-pre" style="max-height:350px;"><code class="language-python">[elasticity]
  type = SmallDeformationIsotropicElasticity
  bulk_modulus = K
  shear_modulus = G
  phase_field = d
  degradation_function = g
  output_properties = &#x27;elastic_strain&#x27;
  outputs = exodus
[]
</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#2732cc2b-3dbb-4b1e-b346-f786df9a9305">(tutorials/small_deformation/elasticity.i)</a></blockquote><div class="card moose-alert moose-alert-tip"><div class="card-title moose-alert-title"><i class="material-icons moose-inline-icon">school</i><span class="moose-alert-title-brand">tip:</span>No hard-coding!</div><div class="card-content"><div class="moose-alert-content"><p><p>We highly recommend you to follow this idea of separating the model from its parameters. As this allows for more general code, less code duplication, maximum modularity/reusability, and minimum maintenance cost.</p></p></div></div></div></section><section id="eff0bc43-772e-4256-9184-31d51898aed4" data-section-level="2" data-section-text="Command line interface"><h2 id="command-line-interface">Command line interface</h2><p>Before running a model, first make sure you have installed and compiled RACCOON following <a href="install.html">the installation guide</a>.</p><p>To run a model, go to the directory of its input files, e.g.</p><pre class="moose-pre"><code class="language-bash">
cd ~/projects/raccoon/tutorials/small_deformation
</code></pre><p>and run the input file using the compiled executable:</p><pre class="moose-pre"><code class="language-bash">
../../raccoon-opt -i elasticity.i
</code></pre><p>The first argument is the path to the RACCOON executable. It is followed by a <code>-i</code> option meaning that we will supply our input file immediately after. <code>elasticity.i</code> is the path to the input file that we want to run.</p><p>To view the complete list of options, simply run the executable without any additional arguments:</p><pre class="moose-pre"><code class="language-bash">
../../raccoom-opt
</code></pre><p>To run the model using multiple processors in parallel, use <code>mpiexec</code>, e.g.</p><pre class="moose-pre"><code class="language-bash">
mpiexec -n 2 ../../raccoon-opt -i elasticity.i
</code></pre><p>where 2 is the number of processors you want to use.</p><p>After the calculation is finished, you can visualize the result following <a href="paraview.html">the visualization guide</a></p></section><section id="07f9cacc-8307-4f10-afb3-3b68b471bdd9" data-section-level="2" data-section-text="Where to store your own models ?"><h2 id="where-to-store-your-own-models">Where to store your own models?</h2><p>Since the implementation and the configuration of a model are separated, we need to consider them separately:</p><ul class="browser-default"><li><p>The source code of the model, i.e. <code>.C</code> files, should be stored in <code>~/projects/raccoon/src</code>. </p></li><li><p>The header file of the model, i.e. <code>.h</code> files, should be stored in <code>~/projects/raccoon/include</code>. </p></li><li><p>The input files and all of their accompanying files shall be stored in a separate repository outside RACCOON, unless you want to eventually merge into the official RACCOON repository.</p></li></ul><p>For your convenience, there is a symlink in the RACCOON repository to a directory sitting in parallel. The symlink is</p><pre class="moose-pre"><code class="language-bash">
~/projects/raccoon/examples -&gt; ~/projects/raccoon_examples
</code></pre><p>meaning that if you create a directory outside RACCOON called <code>raccoon_examples</code>, you will be able to access of its content from <code>~/projects/raccoon/examples</code> as if they sit right there, but all content within that directory are not under version control (you can still set up one on your own, and it is actually highly recommended). </p></section></section><div class="moose-modal modal" id="3c8050e2-4530-4bee-8e72-612ff829ecae"><div class="modal-content"><h4>(doc/SmallDeformationIsotropicElasticity.C)</h4><pre class="moose-pre"><code class="language-cpp">// This file is part of the RACCOON application
// being developed at Dolbow lab at Duke University
// http://dolbow.pratt.duke.edu

#include &quot;SmallDeformationIsotropicElasticity.h&quot;
#include &quot;RaccoonUtils.h&quot;

registerMooseObject(&quot;raccoonApp&quot;, SmallDeformationIsotropicElasticity);

InputParameters
SmallDeformationIsotropicElasticity::validParams()
{
  InputParameters params = SmallDeformationElasticityModel::validParams();
  params.addClassDescription(&quot;Isotropic elasticity under small strain asumptions.&quot;);

  params.addRequiredParam&lt;MaterialPropertyName&gt;(&quot;bulk_modulus&quot;, &quot;The bulk modulus $K$&quot;);
  params.addRequiredParam&lt;MaterialPropertyName&gt;(&quot;shear_modulus&quot;, &quot;The shear modulus $G$&quot;);

  params.addRequiredCoupledVar(&quot;phase_field&quot;, &quot;Name of the phase-field (damage) variable&quot;);
  params.addParam&lt;MaterialPropertyName&gt;(
      &quot;strain_energy_density&quot;,
      &quot;psie&quot;,
      &quot;Name of the strain energy density computed by this material model&quot;);
  params.addParam&lt;MaterialPropertyName&gt;(&quot;degradation_function&quot;, &quot;g&quot;, &quot;The degradation function&quot;);
  params.addParam&lt;MooseEnum&gt;(
      &quot;decomposition&quot;, MooseEnum(&quot;NONE SPECTRAL VOLDEV&quot;, &quot;NONE&quot;), &quot;The decomposition method&quot;);

  return params;
}

SmallDeformationIsotropicElasticity::SmallDeformationIsotropicElasticity(
    const InputParameters &amp; parameters)
  : SmallDeformationElasticityModel(parameters),
    DerivativeMaterialPropertyNameInterface(),
    _K(getADMaterialPropertyByName&lt;Real&gt;(prependBaseName(&quot;bulk_modulus&quot;, true))),
    _G(getADMaterialPropertyByName&lt;Real&gt;(prependBaseName(&quot;shear_modulus&quot;, true))),

    _d_name(getVar(&quot;phase_field&quot;, 0)-&gt;name()),

    // The strain energy density and its derivatives
    _psie_name(prependBaseName(&quot;strain_energy_density&quot;, true)),
    _psie(declareADProperty&lt;Real&gt;(_psie_name)),
    _psie_active(declareADProperty&lt;Real&gt;(_psie_name + &quot;_active&quot;)),
    _dpsie_dd(declareADProperty&lt;Real&gt;(derivativePropertyName(_psie_name, {_d_name}))),

    // The degradation function and its derivatives
    _g_name(prependBaseName(&quot;degradation_function&quot;, true)),
    _g(getADMaterialProperty&lt;Real&gt;(_g_name)),
    _dg_dd(getADMaterialProperty&lt;Real&gt;(derivativePropertyName(_g_name, {_d_name}))),

    _decomposition(getParam&lt;MooseEnum&gt;(&quot;decomposition&quot;).getEnum&lt;Decomposition&gt;())
{
}

ADRankTwoTensor
SmallDeformationIsotropicElasticity::computeStress(const ADRankTwoTensor &amp; strain)
{
  ADRankTwoTensor stress;

  if (_decomposition == Decomposition::none)
    stress = computeStressNoDecomposition(strain);
  else if (_decomposition == Decomposition::spectral)
    stress = computeStressSpectralDecomposition(strain);
  else if (_decomposition == Decomposition::voldev)
    stress = computeStressVolDevDecomposition(strain);
  else
    paramError(&quot;decomposition&quot;, &quot;Unsupported decomposition type.&quot;);

  return stress;
}

ADRankTwoTensor
SmallDeformationIsotropicElasticity::computeStressNoDecomposition(const ADRankTwoTensor &amp; strain)
{
  const ADRankTwoTensor I2(ADRankTwoTensor::initIdentity);
  ADRankTwoTensor stress_intact = _K[_qp] * strain.trace() * I2 + 2 * _G[_qp] * strain.deviatoric();
  ADRankTwoTensor stress = _g[_qp] * stress_intact;

  _psie_active[_qp] = 0.5 * stress_intact.doubleContraction(strain);
  _psie[_qp] = _g[_qp] * _psie_active[_qp];
  _dpsie_dd[_qp] = _dg_dd[_qp] * _psie_active[_qp];

  return stress;
}

ADRankTwoTensor
SmallDeformationIsotropicElasticity::computeStressSpectralDecomposition(
    const ADRankTwoTensor &amp; strain)
{
  const ADReal lambda = _K[_qp] - 2 * _G[_qp] / LIBMESH_DIM;
  const ADRankTwoTensor I2(ADRankTwoTensor::initIdentity);
  ADReal strain_tr = strain.trace();
  ADReal strain_tr_pos = RaccoonUtils::Macaulay(strain_tr);

  // Spectral decomposition
  ADRankTwoTensor strain_pos = RaccoonUtils::spectralDecomposition(strain);

  // Stress
  ADRankTwoTensor stress_intact = _K[_qp] * strain.trace() * I2 + 2 * _G[_qp] * strain.deviatoric();
  ADRankTwoTensor stress_pos = lambda * strain_tr_pos * I2 + 2 * _G[_qp] * strain_pos;
  ADRankTwoTensor stress_neg = stress_intact - stress_pos;
  ADRankTwoTensor stress = _g[_qp] * stress_pos + stress_neg;

  // Strain energy density
  ADReal psie_intact =
      0.5 * lambda * strain_tr * strain_tr + _G[_qp] * strain.doubleContraction(strain);
  _psie_active[_qp] = 0.5 * lambda * strain_tr_pos * strain_tr_pos +
                      _G[_qp] * strain_pos.doubleContraction(strain_pos);
  ADReal psie_inactive = psie_intact - _psie_active[_qp];
  _psie[_qp] = _g[_qp] * _psie_active[_qp] + psie_inactive;
  _dpsie_dd[_qp] = _dg_dd[_qp] * _psie_active[_qp];

  return stress;
}

ADRankTwoTensor
SmallDeformationIsotropicElasticity::computeStressVolDevDecomposition(
    const ADRankTwoTensor &amp; strain)
{
  const ADRankTwoTensor I2(ADRankTwoTensor::initIdentity);

  // Volumetric-deviatoric decomposition
  ADReal strain_tr = strain.trace();
  ADReal strain_tr_pos = RaccoonUtils::Macaulay(strain_tr);
  ADReal strain_tr_neg = strain_tr - strain_tr_pos;
  ADRankTwoTensor strain_dev = strain.deviatoric();

  // Stress
  ADRankTwoTensor stress_intact = _K[_qp] * strain.trace() * I2 + 2 * _G[_qp] * strain.deviatoric();
  ADRankTwoTensor stress_neg = _K[_qp] * strain_tr_neg * I2;
  ADRankTwoTensor stress_pos = stress_intact - stress_neg;
  ADRankTwoTensor stress = _g[_qp] * stress_pos + stress_neg;

  // Strain energy density
  ADReal psie_intact =
      0.5 * _K[_qp] * strain_tr * strain_tr + _G[_qp] * strain_dev.doubleContraction(strain_dev);
  ADReal psie_inactive = 0.5 * _K[_qp] * strain_tr_neg * strain_tr_neg;
  _psie_active[_qp] = psie_intact - psie_inactive;
  _psie[_qp] = _g[_qp] * _psie_active[_qp] + psie_inactive;
  _dpsie_dd[_qp] = _dg_dd[_qp] * _psie_active[_qp];

  return stress;
}
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="29326ef3-7862-4de6-9aae-87827d038793"><div class="modal-content"><h4>(doc/SmallDeformationIsotropicElasticity.h)</h4><pre class="moose-pre"><code class="language-cpp">// This file is part of the RACCOON application
// being developed at Dolbow lab at Duke University
// http://dolbow.pratt.duke.edu

#pragma once

#include &quot;SmallDeformationElasticityModel.h&quot;
#include &quot;DerivativeMaterialPropertyNameInterface.h&quot;

class SmallDeformationIsotropicElasticity : public SmallDeformationElasticityModel,
                                            public DerivativeMaterialPropertyNameInterface
{
public:
  static InputParameters validParams();

  SmallDeformationIsotropicElasticity(const InputParameters &amp; parameters);

  virtual ADRankTwoTensor computeStress(const ADRankTwoTensor &amp; strain) override;

protected:
private:
  // @{ Decomposition methods
  virtual ADRankTwoTensor computeStressNoDecomposition(const ADRankTwoTensor &amp; strain);
  virtual ADRankTwoTensor computeStressSpectralDecomposition(const ADRankTwoTensor &amp; strain);
  virtual ADRankTwoTensor computeStressVolDevDecomposition(const ADRankTwoTensor &amp; strain);
  // @}

  /// The bulk modulus
  const ADMaterialProperty&lt;Real&gt; &amp; _K;

  /// The shear modulus
  const ADMaterialProperty&lt;Real&gt; &amp; _G;

  /// Name of the phase-field variable
  const VariableName _d_name;

  // @{ Strain energy density and its derivative w/r/t damage
  const MaterialPropertyName _psie_name;
  ADMaterialProperty&lt;Real&gt; &amp; _psie;
  ADMaterialProperty&lt;Real&gt; &amp; _psie_active;
  ADMaterialProperty&lt;Real&gt; &amp; _dpsie_dd;
  // @}

  // @{ The degradation function and its derivative w/r/t damage
  const MaterialPropertyName _g_name;
  const ADMaterialProperty&lt;Real&gt; &amp; _g;
  const ADMaterialProperty&lt;Real&gt; &amp; _dg_dd;
  // @}

  /// Decomposittion types
  const enum class Decomposition { none, spectral, voldev } _decomposition;
};
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="2732cc2b-3dbb-4b1e-b346-f786df9a9305"><div class="modal-content"><h4>(tutorials/small_deformation/elasticity.i)</h4><pre class="moose-pre"><code class="language-text">E = 2.1e5
nu = 0.3
K = &#x27;${fparse E/3/(1-2*nu)}&#x27;
G = &#x27;${fparse E/2/(1+nu)}&#x27;

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 30
    ny = 15
    ymax = 0.5
  []
  [noncrack]
    type = BoundingBoxNodeSetGenerator
    input = gen
    new_boundary = noncrack
    bottom_left = &#x27;0.5 0 0&#x27;
    top_right = &#x27;1 0 0&#x27;
  []
  construct_side_list_from_node_list = true
[]

[Variables]
  [disp_x]
  []
  [disp_y]
  []
[]

[AuxVariables]
  [fy]
  []
  [d]
  []
[]

[Kernels]
  [solid_x]
    type = ADStressDivergenceTensors
    variable = disp_x
    component = 0
  []
  [solid_y]
    type = ADStressDivergenceTensors
    variable = disp_y
    component = 1
    save_in = fy
  []
[]

[BCs]
  [ydisp]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = top
    function = &#x27;t&#x27;
  []
  [yfix]
    type = DirichletBC
    variable = disp_y
    boundary = noncrack
    value = 0
  []
  [xfix]
    type = DirichletBC
    variable = disp_x
    boundary = top
    value = 0
  []
[]

[Materials]
  [bulk]
    type = ADGenericConstantMaterial
    prop_names = &#x27;K G&#x27;
    prop_values = &#x27;${K} ${G}&#x27;
  []
  [no_degradation]
    type = NoDegradation
    f_name = g
    function = 1
    phase_field = d
  []
  [strain]
    type = ADComputeSmallStrain
  []
  [elasticity]
    type = SmallDeformationIsotropicElasticity
    bulk_modulus = K
    shear_modulus = G
    phase_field = d
    degradation_function = g
    output_properties = &#x27;elastic_strain&#x27;
    outputs = exodus
  []
  [stress]
    type = ComputeSmallDeformationStress
    elasticity_model = elasticity
    output_properties = &#x27;stress&#x27;
    outputs = exodus
  []
[]

[Postprocessors]
  [Fy]
    type = NodalSum
    variable = fy
    boundary = top
  []
[]

[Executioner]
  type = Transient

  solve_type = NEWTON
  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu       superlu_dist                 &#x27;
  automatic_scaling = true

  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-10

  dt = 1e-5
  end_time = 1e-4
[]

[Outputs]
  exodus = true
  print_linear_residuals = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></div></div></div></main></div></body><script type="text/javascript" src="../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../js/init.js"></script><script type="text/javascript" src="../js/navigation.js"></script><script type="text/javascript" src="../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../js/search_index.js"></script><script type="text/javascript" src="../js/sqa_moose.js"></script>