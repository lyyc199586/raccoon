<!DOCTYPE html><head><meta charset="UTF-8"><title>Step 3 Subdomains and subdomain specific properties | RACCOON</title><link rel="icon" type="image/x-icon" href="../../../../media/raccoon_icon.png" sizes="16x16 32x32 64x64 128x128"></link><link href="../../../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../../../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../../../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../../../../css/civet_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../../../contrib/jquery/jquery.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="../../../../index.html" class="left moose-logo hide-on-med-and-down">RACCOON</a><a href="https://github.com/hugary1995/raccoon" class="right"><img src="../../../../media/framework/github-logo.png" class="github-mark"></img><img src="../../../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="#!" class="dropdown-trigger" data-target="223f79d9-215d-4098-b0ed-cfb656eb00fd" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="8dd539b1-987c-4991-a02e-42a92b573b7e" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="f86a8719-8fa7-4b90-9958-41bf72f11555" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="35124486-d247-4a7c-8a6e-21385d1b0892" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../../../contribute/index.html">Contribute</a></li></ul><a href="#" class="sidenav-trigger" data-target="73197214-077f-4f83-937f-51534644e113"><i class="material-icons">menu</i></a><ul class="sidenav" id="73197214-077f-4f83-937f-51534644e113"><li><a href="#!" class="dropdown-trigger" data-target="554299b0-ed63-4030-a34a-1d6db4d779e7" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="433d0d9b-08f0-44a9-bce1-f2be0fe915c2" data-constrainWidth="false">Tutorials<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="753533ad-4969-42d5-914e-bae86c019a6c" data-constrainWidth="false">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="7a48ec75-89ad-4a93-b5a8-05345bfbbe43" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../../../contribute/index.html">Contribute</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div><ul class="dropdown-content" id="223f79d9-215d-4098-b0ed-cfb656eb00fd"><li><a href="../../../../getting_started/install.html">Install RACCOON</a></li><li><a href="../../../../getting_started/update.html">Update RACCOON</a></li><li><a href="../../../../getting_started/running.html">Running your first model</a></li><li><a href="../../../../getting_started/paraview.html">Visualization</a></li><li><a href="../../../../getting_started/ide.html">Code development</a></li></ul><ul class="dropdown-content" id="8dd539b1-987c-4991-a02e-42a92b573b7e"><li><a href="../../../../tutorials/01_small_deformation_elasticity.html">1. Small deformation</a></li><li><a href="../../../../tutorials/02_mode1_brittle_fracture.html">2. Mode-I fracture</a></li><li><a href="../../../../tutorials/03_mode2_brittle_fracture.html">3. Mode-II fracture</a></li><li><a href="../../../../tutorials/04_fiber_reinforced_matrix.html">4. Fiber-reinforced matrix</a></li><li><a href="../../../../tutorials/05_soil_desiccation.html">5. Soil desiccation</a></li><li><a href="../../../../tutorials/06_large_deformation_elasticity.html">6. Large deformation</a></li><li><a href="../../../../tutorials/07_elastoplasticity.html">7. Elastoplasticity</a></li><li><a href="../../../../tutorials/08_ductile_fracture.html">8. Ductile fracture</a></li><li><a href="../../../../tutorials/09_three_point_bending.html">9. Three-point bending</a></li><li><a href="../../../../tutorials/10_quenching_bibeam.html">10. Quenching of bi-beam</a></li><li><a href="../../../../tutorials/11_adaptivity.html">11. Adaptive mesh refinement</a></li><li><a href="../../../../tutorials/12_nucleation.html">12. Crack nucleation</a></li><li><a href="../../../../tutorials/13_traction_separation.html">13. Traction separation law</a></li></ul><ul class="dropdown-content" id="f86a8719-8fa7-4b90-9958-41bf72f11555"><li><a href="../../../../theory/intro.html">Introduction</a></li><li><a href="../../../../theory/kinematics.html">State variables and kinematics</a></li><li><a href="../../../../theory/thermodynamics.html">Thermodynamics</a></li><li><a href="../../../../theory/minimization.html">The minimization problem</a></li><li><a href="../../../../theory/constitutive_models.html">Constitutive Models</a></li></ul><ul class="dropdown-content" id="35124486-d247-4a7c-8a6e-21385d1b0892"><li><a href="../../../index.html">Physics modules</a></li><li><a href="../../../../syntax/index.html">Complete syntax</a></li><li><a href="../../../../syntax/raccoon.html">RACCOON syntax</a></li><li><a href="../../../../syntax/tensor_mechanics.html">Tensor mechanics syntax</a></li><li><a href="../../../../syntax/phase_field.html">Phase field syntax</a></li><li><a href="../../../../syntax/heat_conduction.html">Heat conduction syntax</a></li></ul><ul class="dropdown-content" id="554299b0-ed63-4030-a34a-1d6db4d779e7"><li><a href="../../../../getting_started/install.html">Install RACCOON</a></li><li><a href="../../../../getting_started/update.html">Update RACCOON</a></li><li><a href="../../../../getting_started/running.html">Running your first model</a></li><li><a href="../../../../getting_started/paraview.html">Visualization</a></li><li><a href="../../../../getting_started/ide.html">Code development</a></li></ul><ul class="dropdown-content" id="433d0d9b-08f0-44a9-bce1-f2be0fe915c2"><li><a href="../../../../tutorials/01_small_deformation_elasticity.html">1. Small deformation</a></li><li><a href="../../../../tutorials/02_mode1_brittle_fracture.html">2. Mode-I fracture</a></li><li><a href="../../../../tutorials/03_mode2_brittle_fracture.html">3. Mode-II fracture</a></li><li><a href="../../../../tutorials/04_fiber_reinforced_matrix.html">4. Fiber-reinforced matrix</a></li><li><a href="../../../../tutorials/05_soil_desiccation.html">5. Soil desiccation</a></li><li><a href="../../../../tutorials/06_large_deformation_elasticity.html">6. Large deformation</a></li><li><a href="../../../../tutorials/07_elastoplasticity.html">7. Elastoplasticity</a></li><li><a href="../../../../tutorials/08_ductile_fracture.html">8. Ductile fracture</a></li><li><a href="../../../../tutorials/09_three_point_bending.html">9. Three-point bending</a></li><li><a href="../../../../tutorials/10_quenching_bibeam.html">10. Quenching of bi-beam</a></li><li><a href="../../../../tutorials/11_adaptivity.html">11. Adaptive mesh refinement</a></li><li><a href="../../../../tutorials/12_nucleation.html">12. Crack nucleation</a></li><li><a href="../../../../tutorials/13_traction_separation.html">13. Traction separation law</a></li></ul><ul class="dropdown-content" id="753533ad-4969-42d5-914e-bae86c019a6c"><li><a href="../../../../theory/intro.html">Introduction</a></li><li><a href="../../../../theory/kinematics.html">State variables and kinematics</a></li><li><a href="../../../../theory/thermodynamics.html">Thermodynamics</a></li><li><a href="../../../../theory/minimization.html">The minimization problem</a></li><li><a href="../../../../theory/constitutive_models.html">Constitutive Models</a></li></ul><ul class="dropdown-content" id="7a48ec75-89ad-4a93-b5a8-05345bfbbe43"><li><a href="../../../index.html">Physics modules</a></li><li><a href="../../../../syntax/index.html">Complete syntax</a></li><li><a href="../../../../syntax/raccoon.html">RACCOON syntax</a></li><li><a href="../../../../syntax/tensor_mechanics.html">Tensor mechanics syntax</a></li><li><a href="../../../../syntax/phase_field.html">Phase field syntax</a></li><li><a href="../../../../syntax/heat_conduction.html">Heat conduction syntax</a></li></ul></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/index.md" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="moose-content col s12 m12 l12"><section id="63dd0049-c92b-4663-80eb-d434b5c9b057" data-section-level="1" data-section-text="Step 3 - Subdomains and subdomain - specific properties"><h1 id="step-3-subdomains-and-subdomain-specific-properties">Step 3 - Subdomains and subdomain-specific properties</h1><p>In this step we&#x27;ll be setting up two subdomains (regions of our sample) with differing material properties.</p><pre class="moose-pre" style="max-height:350px;"><code class="language-text">#
# Added subdomains and subdomain-specific properties
# https://mooseframework.inl.gov/modules/tensor_mechanics/tutorials/introduction/step03.html
#

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  [generated]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 40
    ny = 20
    xmax = 2
    ymax = 1
  []

  # assign two subdomains
  [block1]
    type = SubdomainBoundingBoxGenerator
    input = generated
    block_id = 1
    bottom_left = &#x27;0 0 0&#x27;
    top_right = &#x27;1 1 0&#x27;
  []
  [block2]
    type = SubdomainBoundingBoxGenerator
    input = block1
    block_id = 2
    bottom_left = &#x27;1 0 0&#x27;
    top_right = &#x27;2 1 0&#x27;
  []
[]

[Modules/TensorMechanics/Master]
  [all]
    add_variables = true
  []
[]

[BCs]
  [bottom_x]
    type = DirichletBC
    variable = disp_x
    boundary = bottom
    value = 0
  []
  [bottom_y]
    type = DirichletBC
    variable = disp_y
    boundary = bottom
    value = 0
  []
  [Pressure]
    [top]
      boundary = top
      function = 1e7*t
    []
  []
[]

[Materials]
  [elasticity1]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 1e9
    poissons_ratio = 0.3
    block = 1
  []
  [elasticity2]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 5e8
    poissons_ratio = 0.3
    block = 2
  []
  [stress]
    type = ComputeLinearElasticStress
  []
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;
  end_time = 5
  dt = 1
[]

[Outputs]
  exodus = true
[]
</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#9d9fe49c-c20c-4c33-86f9-ea01a7101298">(moose/modules/tensor_mechanics/tutorials/introduction/step03.i)</a><section id="0a53af65-dd9b-4fa4-ad21-b654d4f8d9c6" data-section-level="2" data-section-text="Input file"><h2 id="input-file">Input file</h2><section id="ff3e86c7-0cfa-479a-b8ec-cb109c2a5fef" data-section-level="3" data-section-text="Mesh"><h3><code>Mesh</code></h3><p>Note that we refine the mesh a bit to better capture the discontinuity we&#x27;re introducing below.</p><p>The <code>block1</code> and <code>block2</code> subblocks are part of a chain of mesh generators, linked by their <code>input</code> parameters. Each of the <a href="../../../../source/meshgenerators/SubdomainBoundingBoxGenerator.html"><code>SubdomainBoundingBoxGenerator</code></a> adds a subdomain definition to the current mesh. Here we define two subdomains, one for the left half of the domain and one for the right.</p></section><section id="6de86ef2-196b-42fa-ad96-b01d2e78b3b1" data-section-level="3" data-section-text="Materials"><h3><code>Materials</code></h3><p>We now define two elasticity tensors in this problem, one on the left half (<code>block = 1</code>) and on on the right half (<code>block = 2</code>), referring to the subdomain IDs we assigned using the mesh generators above.</p><p>Note how the stiffness of the right hand side is only half that of the left hand side.</p></section><section id="cee9be58-0db7-4d76-bf60-c3c8dc64ba63" data-section-level="3" data-section-text="Executioner"><h3><code>Executioner</code></h3><p>We make a few changes in the Executioner block here, and you should try playing with some of the settings later on.</p><ul class="browser-default"><li><p>We select NEWTON as our <a href="#09430203-8faf-4cbc-8008-336b083ad7ab" class="moose-modal-link modal-trigger">&quot;solve_type&quot;</a>. This is a good (fast) option whenever we have a complete Jacobian for the system. It should give us 1-2 linear iterations for every non-linear iteration. Note that for NEWTON solves MOOSE automatically sets up an <a href="../../../../source/preconditioners/SingleMatrixPreconditioner.html"><code>SMP</code></a> with the <a href="#a0e0694b-75d6-46f5-9be8-1b6c12bd2699" class="moose-modal-link modal-trigger">&quot;full&quot;</a> option set to <code>true</code> (this can be disabled by setting <a href="#c2a518c4-32d1-45be-a66b-9a0b441ec326" class="moose-modal-link modal-trigger">&quot;auto_preconditioning&quot;</a> to <code>false</code>). </p></li><li><p>We use LU decomposition to solve the linear problem, this preconditioner is very effective on a small problem like this.</p></li></ul></section></section><section id="138ba2e6-f640-40d8-af87-4337c8f9433b" data-section-level="2" data-section-text="Questions"><h2 id="questions">Questions</h2><section id="8b257e3f-63b4-40db-a2c5-016974e61290" data-section-level="3" data-section-text="Visualizing strain"><h3 id="visualizing-strain">Visualizing strain</h3><p>So far we&#x27;ve only looked at the deformation of the mesh. MOOSE can visualize a host of mechanical quantities, and the master action makes this particularly easy.</p><blockquote><p>Try and add output for the vonMises stress in the simulation domain. Take a look at the <a href="#9aaf4896-cac6-4f88-86f9-510179ec2764" class="moose-modal-link modal-trigger">&quot;generate_output&quot;</a> parameter...</p></blockquote><p><a href="answer03a.html">Click here for the answer.</a></p></section><section id="22a826ca-b17f-4081-a5e6-b61e78773b2e" data-section-level="3" data-section-text="Sidebar : Thermal expansion"><h3 id="sidebar-thermal-expansion">Sidebar: Thermal expansion</h3><blockquote><p>In addition to externally applied loading deformation can be induced by internal changes of a material. One common effect is the thermal expansion (or contraction) under temperature changes.</p></blockquote><p><a href="answer03a.html">Click here for the sidebar on thermal expansion.</a></p><p>Once you&#x27;ve answered the questions and run this example we will move on to <a href="step04.html">Step 4</a> and setup a cantilever problem that prepares us for contact. </p></section></section></section><div class="moose-modal modal" id="9d9fe49c-c20c-4c33-86f9-ea01a7101298"><div class="modal-content"><h4>(moose/modules/tensor_mechanics/tutorials/introduction/step03.i)</h4><pre class="moose-pre"><code class="language-text">#
# Added subdomains and subdomain-specific properties
# https://mooseframework.inl.gov/modules/tensor_mechanics/tutorials/introduction/step03.html
#

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  [generated]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 40
    ny = 20
    xmax = 2
    ymax = 1
  []

  # assign two subdomains
  [block1]
    type = SubdomainBoundingBoxGenerator
    input = generated
    block_id = 1
    bottom_left = &#x27;0 0 0&#x27;
    top_right = &#x27;1 1 0&#x27;
  []
  [block2]
    type = SubdomainBoundingBoxGenerator
    input = block1
    block_id = 2
    bottom_left = &#x27;1 0 0&#x27;
    top_right = &#x27;2 1 0&#x27;
  []
[]

[Modules/TensorMechanics/Master]
  [all]
    add_variables = true
  []
[]

[BCs]
  [bottom_x]
    type = DirichletBC
    variable = disp_x
    boundary = bottom
    value = 0
  []
  [bottom_y]
    type = DirichletBC
    variable = disp_y
    boundary = bottom
    value = 0
  []
  [Pressure]
    [top]
      boundary = top
      function = 1e7*t
    []
  []
[]

[Materials]
  [elasticity1]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 1e9
    poissons_ratio = 0.3
    block = 1
  []
  [elasticity2]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 5e8
    poissons_ratio = 0.3
    block = 2
  []
  [stress]
    type = ComputeLinearElasticStress
  []
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;
  end_time = 5
  dt = 1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="moose-modal modal" id="09430203-8faf-4cbc-8008-336b083ad7ab"><div class="modal-content"><h4>solve_type</h4><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>PJFNK, JFNK, NEWTON, FD, LINEAR</p><p class="moose-parameter-description"><span>Description:</span>PJFNK: Preconditioned Jacobian-Free Newton Krylov JFNK: Jacobian-Free Newton Krylov NEWTON: Full Newton Solve FD: Use finite differences to compute Jacobian LINEAR: Solving a linear problem</p></div></div><div class="moose-modal modal" id="a0e0694b-75d6-46f5-9be8-1b6c12bd2699"><div class="modal-content"><h4>full</h4><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set to true if you want the full set of couplings.  Simply for convenience so you don't have to set every off_diag_row and off_diag_column combination.</p></div></div><div class="moose-modal modal" id="c2a518c4-32d1-45be-a66b-9a0b441ec326"><div class="modal-content"><h4>auto_preconditioning</h4><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>When true and a [Preconditioning] block does not exist, the application will attempt to use the correct preconditioning given the Executioner settings.</p></div></div><div class="moose-modal modal" id="9aaf4896-cac6-4f88-86f9-510179ec2764"><div class="modal-content"><h4>generate_output</h4><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MultiMooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>creep_strain_xx, creep_strain_xy, creep_strain_xz, creep_strain_yx, creep_strain_yy, creep_strain_yz, creep_strain_zx, creep_strain_zy, creep_strain_zz, creep_stress_xx, creep_stress_xy, creep_stress_xz, creep_stress_yx, creep_stress_yy, creep_stress_yz, creep_stress_zx, creep_stress_zy, creep_stress_zz, elastic_strain_xx, elastic_strain_xy, elastic_strain_xz, elastic_strain_yx, elastic_strain_yy, elastic_strain_yz, elastic_strain_zx, elastic_strain_zy, elastic_strain_zz, mechanical_strain_xx, mechanical_strain_xy, mechanical_strain_xz, mechanical_strain_yx, mechanical_strain_yy, mechanical_strain_yz, mechanical_strain_zx, mechanical_strain_zy, mechanical_strain_zz, plastic_strain_xx, plastic_strain_xy, plastic_strain_xz, plastic_strain_yx, plastic_strain_yy, plastic_strain_yz, plastic_strain_zx, plastic_strain_zy, plastic_strain_zz, strain_xx, strain_xy, strain_xz, strain_yx, strain_yy, strain_yz, strain_zx, strain_zy, strain_zz, stress_xx, stress_xy, stress_xz, stress_yx, stress_yy, stress_yz, stress_zx, stress_zy, stress_zz, effective_plastic_strain, effective_creep_strain, firstinv_stress, firstinv_strain, hydrostatic_stress, intensity_stress, l2norm_mechanical_strain, l2norm_stress, l2norm_strain, l2norm_elastic_strain, l2norm_plastic_strain, l2norm_creep_strain, max_principal_mechanical_strain, max_principal_stress, max_principal_strain, maxshear_stress, mid_principal_mechanical_strain, mid_principal_stress, mid_principal_strain, min_principal_mechanical_strain, min_principal_stress, min_principal_strain, secondinv_stress, secondinv_strain, thirdinv_stress, thirdinv_strain, triaxiality_stress, volumetric_mechanical_strain, volumetric_strain, vonmises_stress, directional_stress, directional_strain, axial_stress, axial_strain, axial_plastic_strain, axial_creep_strain, axial_elastic_strain, hoop_stress, hoop_strain, hoop_plastic_strain, hoop_creep_strain, hoop_elastic_strain, radial_stress, radial_strain</p><p class="moose-parameter-description"><span>Description:</span>Add scalar quantity output for stress and/or strain</p></div></div></div></div></div></main></div></body><script type="text/javascript" src="../../../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../../../js/init.js"></script><script type="text/javascript" src="../../../../js/navigation.js"></script><script type="text/javascript" src="../../../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../../../js/search_index.js"></script><script type="text/javascript" src="../../../../js/sqa_moose.js"></script>